---
title: 系统配置
author: ALRCMt
date: 2025-06-09
category: Jekyll
layout: post
---


**参考[@生火人 firemaker](https://github.com/firemakergk/aquar-build-helper?tab=readme-ov-file#%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85)**
**主要是以下系统的安装与配置**

- [**Proxmox Virtual Environment**](#%E5%AE%89%E8%A3%85-proxmox-virtual-environment)
- [**TrueNAS scale**](#%E5%AE%89%E8%A3%85-truenas-scale)
- [**Ubuntu Server**](#%E5%AE%89%E8%A3%85-ubuntu-server)
  > 特殊安装：[**Windows10**](#%E5%AE%89%E8%A3%85-windows10-%E4%B8%8D%E9%9C%80%E8%A6%81)  
  > 因为我的笔记本坏了一段时间，又没有别的电脑，刚好有一块多的 m.2 硬盘  
  > 于是我额外安装了 win10 系统在这块硬盘上，它与 PVE 是独立的

<hr />

## 安装 Proxmox Virtual Environment

**1.下载镜像**

pve 的镜像官网下载页面：[https://www.proxmox.com/en/downloads/category/iso-images-pve](https://www.proxmox.com/en/downloads/category/iso-images-pve)

~~直接下载最新版本即可~~推荐 8.x 版本，9.x 版本 BUG 太 ™ 多了

**2.制作启动盘**

推荐使用 Etcher 制作启动盘，你要用 Rufus 也随便

Etcher 下载地址：[https://pve.proxmox.com/pve-docs/pve-admin-guide.html#installation_prepare_media](https://pve.proxmox.com/pve-docs/pve-admin-guide.html#installation_prepare_media)

**3.安装 PVE**

将启动盘插入物理机，重启进入 BIOS（进 bios 哪个键自己网上搜对应主板去），选择从启动盘启动，然后进入安装流程

安装过程中 pve 会让你设置一个域名，并不关键，按默认即可

安装流程的官方文档：[https://pve.proxmox.com/pve-docs/pve-admin-guide.html#installation_installer](https://pve.proxmox.com/pve-docs/pve-admin-guide.html#installation_installer)

安装过程中卡死？解决方法：[PVE 安装时卡死](/jekyll/2025-06-11-LoveFormMe.html#01pve-%E5%AE%89%E8%A3%85%E6%97%B6%E5%8D%A1%E6%AD%BB)

**4.验证安装**

PVE 安装完成后，首先在你的物理机屏幕上会显示出服务的 IP 地址（大概类似https://192.168.X.XXX:8006），注意是 https 协议，在局域网下打开这个地址，你就可以看到 PVE 的 WEB 控制台了

![](https://raw.githubusercontent.com/ALRCMt/MtAIO-Build/main/photo/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202025-08-09%20110507.png)

默认用户是 root，密码是你安装时设置的，语言设置为中文

 <hr />
 
## 安装 TrueNAS scale

TrueNAS scale 相较于可以直接搭载 Docker 服务，虽然使用 PVE 这种虚拟化平台作为底层系统，但是 TrueNAS scale 能提供更多选择（其实就是我根本没看是 core 还是 scale）

**1.下载镜像**

TrueNAS SCALE 的下载页面： [https://www.truenas.com/download-truenas-community-edition](https://www.truenas.com/download-truenas-community-edition)

刚进入时会提示你注册，点击右下角的 No Thanks 即可看到下载链接了。推荐直接下载最新版本即可。

**2.上传镜像到 PVE**

在左侧的树状图中选择 pve 节点的 local 存储，在右侧选择 ISO 镜像，然后点上传，上传你的在上一步下载的 TrueNAS scale ISO 文件。你可以提前下载后面两节需要用到的镜像，然后集中上传，这可以节省很多时间。

**3.创建虚拟机**

在 pve 的 web 页面的右上角点击创建虚拟机，为 TrueNAS 创建一个虚拟机。

通用信息配置中勾选右下角的 Advanced，并把这个虚拟机设置为开机自启动，然后设置启动顺序为 1，等待时间 60(秒)，需要注意的是这里的等待时间指的是这台虚拟机开机后等待下一台虚拟机开机的时间，而不是他与上一台虚拟机开机的等待时间。**设置合理的启动顺序和等待时间非常重要**，否则会影响上层服务的存储池挂载

<img src="https://github.com/ALRCMt/MtAIO-Build/raw/main/photo/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202025-08-09%20030601.png" alt="" width="600px"/>

操作系统配置页面选择你上传的 TrueNAS IOS 镜像，并设置操作系统类型为 Other

<img src="https://github.com/ALRCMt/MtAIO-Build/raw/main/photo/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202025-08-09%20030634.png" alt="" width="600px"/>

系统配置页面我的配置如下：

<img src="https://github.com/ALRCMt/MtAIO-Build/raw/main/photo/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202025-08-09%20030653.png" alt="" width="600px"/>

系统磁盘空间我分配了 32G，其他配置项没有需要修改的地方

<img src="https://github.com/ALRCMt/MtAIO-Build/raw/main/photo/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202025-08-09%20030701.png" alt="" width="600px"/>

CPU 分配了 2 核，另外 CPU 类型选择了 host，在单机情况下这样设置可以获得最小性能损耗

> _在 8.x 版本的系统中，如果使用的是混合架构的 CPU 如 12 代 i7，可以直接在界面的 CPU Affinity 设置中指定绑定的 CPU 序号_  
> _查看 CPU 多核类别的方法是使用`lscpu -e`命令，可以看到 E 核的 MAXMHZ 会低于 P 核_  
> _（这里我并没有这么配置，所以我不太清楚具体配置）_

<img src="https://github.com/ALRCMt/MtAIO-Build/raw/main/photo/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202025-08-09%20030809.png" alt="" width="600px"/>

内存方面由于 TrueNAS 推荐使用 16G 以上内存空间，但是我总共只有 16G 内存，所以分配了 8G，可以正常使用

<img src="https://github.com/ALRCMt/MtAIO-Build/raw/main/photo/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202025-08-09%20030759.png" alt="" width="600px"/>

网络方面我暂时修改默认配置，以后应该可以将网络类型换成 VirtlIO 以提升性能

进入到确认页面后点击创建就可以了

<img src="https://github.com/ALRCMt/MtAIO-Build/raw/main/photo/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202025-08-09%20030836.png" alt="" width="600px"/>

虚拟机创建成功后，打开他的 console 应该就可以看到安装提示了。

**4.安装 TrueNAS SCALE**

推荐教程 [https://post.smzdm.com/p/a6d8m6vg/](https://post.smzdm.com/p/a6d8m6vg/)

官方文档：[https://www.truenas.com/docs/scale/25.04/gettingstarted/install/](https://www.truenas.com/docs/scale/25.04/gettingstarted/install/)

由于在一些 USB 设备连接不稳定的情况下，TrueNAS 虚拟机会收到 USB 热插拔的影响而死机，所以安装完成以后打开虚拟机的 Options（选项）页，双击 Hotplug（热拔插）设置项，把 USB 选项的勾选去掉。

**5.验证安装**

TrueNAS 安装成功后在局域网中使用浏览器打开提示中的地址应该就可以看到 TrueNAS 的 Web 页面了

![](https://github.com/ALRCMt/MtAIO-Build/raw/main/photo/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202025-08-09%20030930.png)

默认用户名是 truenas_admin，密码是在安装时设置

<hr />

## 安装 Ubuntu Server

**1.下载镜像**

由于我们使用 ubuntu 的作用主要是承载各种服务而非直接与之交互，所以选择没有 GUI 的 Ubuntu Server 版本。

Ubuntu Server 下载页面：[https://cn.ubuntu.com/download/server/step1](https://cn.ubuntu.com/download/server/step1)

选择最新的 LTS 版本即可

**2.上传镜像**

与 TrueNAS 章节的上传操作一致，不再重复

**3.创建虚拟机**

与 TrueNAS 章节的创建操作类似，内存我分配了 4GB

**4.安装 Ubuntu Server**

推荐教程：[https://blog.csdn.net/FungLeo/article/details/148370828](https://blog.csdn.net/FungLeo/article/details/148370828)

Ubuntu Server 官方文档的安装指引：[https://ubuntu.com/server/docs/install/step-by-step](https://ubuntu.com/server/docs/install/step-by-step)

安装时有几点需要注意：

1.  Mirror 设置时，Ubuntu 现在默认为国内源地址，如果不是的话请更换成你所在的地区最稳定的地址
2.  ubuntu 安装默认只占用一半空间，需自己勾选上 _[已经安装完成？补救方法](/jekyll/2025-06-11-LoveFormMe.html#05ubuntu-%E7%A9%BA%E9%97%B4%E4%BB%85%E5%8D%A0%E7%94%A8%E4%B8%80%E5%8D%8A)_
3.  SSH 设置时勾选 Install SSH Server
4.  Snaps 页面不要选择任何软件进行安装
5.  在 Ubuntu 安装开始执行一段时间后（大概几分钟），会开始拉取软件源信息，没必要等待，直接选择"跳过并重启"即可

**5.验证安装**

在 PVE 中找到 Ubuntu 的虚拟机，并进入 Console 界面，多按动几次回车键，如果看到类似的提示，则输入你安装时设置的用户名和密码。如果登录成功则说明系统正常运行了

![](https://github.com/ALRCMt/MtAIO-Build/raw/main/photo/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202025-08-09%20122037.png)

<hr />

## 安装 Windows10 _不需要_
**1.下载镜像**

Win10 iso 镜像下载地址：[https://www.microsoft.com/zh-cn/software-download/windows10](https://www.microsoft.com/zh-cn/software-download/windows10)

**2.制作启动盘**

我这里使用微 PE 来做启动盘

微 PE 下载地址：[https://www.wepe.com.cn/download.html](https://www.wepe.com.cn/download.html)

下载后启动应用写入 U 盘，再将已下载的 iso 镜像复制到 U 盘

**3.安装 windows10**

将启动盘插入物理机，开机进入 BIOS，选择从启动盘启动

进 PE 后官方安装教程：[https://www.wepe.com.cn/ubook/installtool.html](https://www.wepe.com.cn/ubook/installtool.html)

安装后拔出硬盘，我这里不多赘述了

**4.验证安装**

安装完成后，开机 bios 调整引导硬盘顺序即可选择启动 win10 或 PVE